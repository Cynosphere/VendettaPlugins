(function(r,m,N,E,f){"use strict";const I=N.findByName("RowManager"),A=N.findByProps("parseToAST");var c;(function(n){n[n.BUILT_IN=0]="BUILT_IN",n[n.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",n[n.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",n[n.BOT=3]="BOT",n[n.PLACEHOLDER=4]="PLACEHOLDER"})(c||(c={}));var a;(function(n){n[n.SUB_COMMAND=1]="SUB_COMMAND",n[n.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",n[n.STRING=3]="STRING",n[n.INTEGER=4]="INTEGER",n[n.BOOLEAN=5]="BOOLEAN",n[n.USER=6]="USER",n[n.CHANNEL=7]="CHANNEL",n[n.ROLE=8]="ROLE",n[n.MENTIONABLE=9]="MENTIONABLE",n[n.NUMBER=10]="NUMBER",n[n.ATTACHMENT=11]="ATTACHMENT"})(a||(a={}));var s;(function(n){n[n.CHAT=1]="CHAT",n[n.USER=2]="USER",n[n.MESSAGE=3]="MESSAGE"})(s||(s={}));const d=[],p=/([\u{e0020}-\u{e007e}]{1,})/u;function T(n,i){for(const e in n){const t=n[e];if(typeof t.content=="string"){if(p.test(t.content)){const u=t.content.replace(p,""),[o,y]=t.content.match(p);n[e]={content:u,type:"text"},n.splice(Number(e)+1,0,{content:[{content:A.parseToAST([...y].map(function(R){return String.fromCodePoint(R.codePointAt(0)-917504)}).join(""),{channelId:i}),type:"em"}],type:"link",target:"usernameOnClick",context:{username:1,usernameOnClick:{action:"0",userId:"0",linkColor:E.ReactNative.processColor("slateblue"),messageChannelId:"0"},medium:!0}})}}else Array.isArray(t.content)&&T(t.content,i)}}const l=function(){d.push(m.after("generate",I.prototype,function(n,i){let[e]=n,{message:t}=i;e.rowType===1&&t.content&&T(t.content,t.channelId)})),d.push(f.registerCommand({name:"3y3",displayName:"3y3",description:"Second sight encoding",displayDescription:"Second sight encoding",type:s.CHAT,inputType:c.BUILT_IN_TEXT,applicationId:"-1",options:[{name:"message",displayName:"message",description:"What to encode",displayDescription:"What to encode",type:a.STRING,required:!0},{name:"padding",displayName:"padding",description:"Optional padded message",displayDescription:"Optional padded message",type:a.STRING,required:!1}],execute:function(n,i){const e=n.find(function(o){return o.name=="message"})?.value,t=n.find(function(o){return o.name=="padding"})?.value??"",u=Array.from(e).map(function(o){return o.codePointAt(0)}).filter(function(o){return o>=32&&o<=127}).map(function(o){return String.fromCodePoint(o+917504)}).join("");return{content:(t??"")+" "+u}}}))},O=function(){for(const n of d)n?.()};return r.onLoad=l,r.onUnload=O,r})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.commands);
